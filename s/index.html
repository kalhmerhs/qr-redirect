<!doctype html>
<html lang="el">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Redirecting…</title>
  <meta name="robots" content="noindex,nofollow" />
</head>
<body>
  <p>Σε ανακατευθύνω στη φόρμα…</p>
  <p id="fallback" style="display:none;">
    Αν δεν γίνει ανακατεύθυνση, πάτησε:
    <a id="link" href="#">Συνέχεια</a>
  </p>

  <script>
    const TYPEFORM_BASE = "https://tally.so/r/kdN7Nd";

    const qs = new URLSearchParams(window.location.search);
    const c = qs.get("c");
    const p = qs.get("p") || "000";
    const m = qs.get("m");
    const v = qs.get("v") || "1";

    if (!c || !m) {
      document.body.innerHTML = `
        <p>Λείπουν πληροφορίες από το QR/link.</p>
        <p>Σωστό παράδειγμα: <code>?c=MAS&p=012&m=03&v=1</code></p>
      `;
    } else {
      const target = new URL(TYPEFORM_BASE);
      target.searchParams.set("c", c);
      target.searchParams.set("p", p);
      target.searchParams.set("m", m);
      target.searchParams.set("v", v);

      document.getElementById("fallback").style.display = "block";
      const a = document.getElementById("link");
      a.href = target.toString();

      window.location.replace(target.toString());
    }
  </script>
</body>
</html>
